/*!-- all javascript --*/
document.querySelector(".header")&&(()=>{let e=document.querySelector(".header"),t=0;window.addEventListener("scroll",()=>{let l=scrollY;e.classList.toggle("pin",l>160&&l>t),e.classList.toggle("pinX",l>160),t=l})})();if(null!==document.querySelector(".BlogSearch")){let e=document.querySelectorAll(".BlogSearch .buttons span"),t=document.querySelector(".BlogSearch .shortIi");e.forEach(a=>{a.addEventListener("click",()=>{e.forEach(e=>e.classList.remove("selected")),a.classList.add("selected");let l=a.getAttribute("data-text");t.setAttribute("data-text",l);let c=a.getAttribute("data-value");t.setAttribute("data-value",c),document.querySelector(".BlogSearch input.shortI").checked=!1,document.getElementById("search-action").focus()})}),document.getElementById("search-form").addEventListener("submit",function(e){var a=document.getElementById("search-action").value,l=t.getAttribute("data-value");l&&(a+=" label:"+l),document.getElementById("search-action").value=a});let a=document.querySelectorAll(".BSAction"),l=document.querySelector("#search-action"),c=document.querySelector(".BlogSearch"),r=!1;a.forEach(e=>{e.addEventListener("click",()=>{r?(l.blur(),c.classList.remove("focus")):(l.focus(),c.classList.add("focus")),r=!r})});let s=document.getElementById("search-action"),d=document.getElementById("result-span");d.addEventListener("click",()=>{d.classList.add("hidden")}),s.addEventListener("input",()=>{""!==s.value.trim()?d.classList.remove("hidden"):d.classList.add("hidden")})}document.querySelector("time")&&(()=>{function t(e){let t=new Date,n=new Date(e),r=Math.floor((t-n)/1e3);for(let t of[{s:31536e3,l:["year","years"]},{s:2592e3,l:["month","months"]},{s:604800,l:["week","weeks"]},{s:86400,l:["day","days"]},{s:3600,l:["hour","hours"]},{s:60,l:["minute","minutes"]},{s:1,l:["second","seconds"]}]){let n=Math.floor(r/t.s);if(n>=1)return`${n} ${1===n?t.l[0]:t.l[1]} ago`}return"just now"}function n(){document.querySelectorAll("time").forEach(e=>{e.textContent=t(e.getAttribute("datetime"))})}n(),setInterval(n,1e3)})();if(null!==document.querySelector("#speak")){let e=document.getElementById("speak"),t=document.getElementById("speakText"),l,n=!1;function r(e){let t="",l=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,{acceptNode:e=>{let t=e.parentNode.tagName.toLowerCase();return"script"===t||"style"===t?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}},!1);for(;l.nextNode();)t+=l.currentNode.nodeValue.trim()+" ";return t.trim()}e.addEventListener("click",()=>{if(n)speechSynthesis.cancel(),e.classList.remove("play"),n=!1;else{let o=r(t);o&&((l=new SpeechSynthesisUtterance(o)).onend=()=>{e.classList.remove("play"),n=!1},speechSynthesis.speak(l),e.classList.add("play"),n=!0)}})}if(null!==document.querySelector("#read-time")){function o(e){let t="",l=e.childNodes.length;for(let n=0;n<l;n++){let r=e.childNodes[n];8!==r.nodeType&&(t+=1!==r.nodeType?r.nodeValue:o(r))}return t}let a=Math.round(o(document.querySelector(".docs")).split(" ").length/200),d;d=0===a||1===a?"minute":"minutes",document.getElementById("read-time").innerHTML=`${a} ${d}`}if(null!==document.querySelector(".copyShare")){let t=document.querySelector(".copyShare");t.addEventListener("click",function(){let t=this.getAttribute("data-url");navigator.clipboard.writeText(t).then(()=>{let t=this.querySelector("span"),e=t.textContent;t.textContent="Link was copied",setTimeout(()=>{t.textContent=e},1e3)})})}function updateSaveButtons(t){let e=document.querySelectorAll(`.save-this[data-postId='${t}']`),o=(JSON.parse(localStorage.getItem("bookmarkedPosts"))||[]).includes(t);e.forEach(t=>{o?t.classList.add("saved"):t.classList.remove("saved")})}function loadSavedPosts(){(JSON.parse(localStorage.getItem("bookmarkedPosts"))||[]).forEach(t=>updateSaveButtons(t)),updateBookmarkCount()}function updateBookmarkCount(){let t=JSON.parse(localStorage.getItem("bookmarkedPosts"))||[];document.getElementById("post-count").setAttribute("data-text",t.length)}function initializeSaveButtons(){document.querySelectorAll(".save-this").forEach(t=>{t.addEventListener("click",()=>{let e=t.getAttribute("data-postId"),o=JSON.parse(localStorage.getItem("bookmarkedPosts"))||[],a=o.indexOf(e);-1===a?o.push(e):o.splice(a,1),localStorage.setItem("bookmarkedPosts",JSON.stringify(o)),updateSaveButtons(e),updateBookmarkCount()})})}initializeSaveButtons(),loadSavedPosts();let paginationButton=document.querySelector(".pagination .button");null!==paginationButton&&paginationButton.addEventListener("click",function(){let t=this,e=t.getAttribute("data-action");e?(t.classList.add("loading"),fetch(e).then(t=>t.text()).then(e=>{let o=new DOMParser().parseFromString(e,"text/html"),a=Array.from(o.querySelectorAll(".stories.grid article")).map(t=>t.outerHTML).join("");document.querySelector(".stories.grid").innerHTML+=a;let i=o.querySelector(".pagination .button[data-action]")?.getAttribute("data-action");i?t.setAttribute("data-action",i):document.querySelector(".pagination")?.setAttribute("hidden","true"),t.classList.remove("loading"),initializeSaveButtons(),loadSavedPosts(),"function"==typeof loadClickCounts&&loadClickCounts()}).catch(e=>{t.classList.remove("loading"),console.error("Error loading new posts:",e)})):document.querySelector(".pagination")?.setAttribute("hidden","true")});if(null!==document.querySelector(".likeI")){const viewSeting={blogID:"BLOG",databaseUrl:"https://like-count-2afb6-default-rtdb.firebaseio.com/",abbreviation:!0};function abvr(e){var t=Math.sign(Number(e));return 1e9<=Math.abs(Number(e))?t*(Math.abs(Number(e))/1e9).toFixed(2)+"B":1e6<=Math.abs(Number(e))?t*(Math.abs(Number(e))/1e6).toFixed(2)+"M":1e3<=Math.abs(Number(e))?t*(Math.abs(Number(e))/1e3).toFixed(2)+"K":Math.abs(Number(e))}function loadClickCounts(){var e=document.querySelectorAll(".likeI"),t=firebase.database();for(let r=0;r<e.length;r++){var a=e[r],i=a.getAttribute("data-id"),s=JSON.parse(localStorage.getItem("clickedPosts"))||{};(i=t.ref("BlogID_"+viewSeting.blogID+"/PostID_"+i+"/clicks")).once("value",function(e,t){return function(t){t=t.exists()?t.val():0,e.setAttribute("data-text",viewSeting.abbreviation?abvr(t):t),e.classList.remove("hidden"),s[e.getAttribute("data-id")]&&e.classList.add("clicked")}}(a))}}function incrementClickCount(e){var t=firebase.database(),a=e.getAttribute("data-id"),i=t.ref("BlogID_"+viewSeting.blogID+"/PostID_"+a+"/clicks"),s=JSON.parse(localStorage.getItem("clickedPosts"))||{};i.once("value",(function(t){var r=t.exists()?t.val():0;r++,i.set(r).then((function(){e.setAttribute("data-text",viewSeting.abbreviation?abvr(r):r),s[a]||(e.classList.add("clicked"),s[a]=!0,localStorage.setItem("clickedPosts",JSON.stringify(s)))}))}))}function loadScript(e,t,a=!0){return new Promise((i,r)=>{if(t&&document.getElementById(t)){i();return}let s=document.createElement("script");t&&(s.id=t),s.src=e,s.async=a,s.onload=()=>i(),s.onerror=()=>r(Error(`Failed to load script: ${e}`)),document.head.appendChild(s)})}loadScript("https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js").then(()=>loadScript("https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js")).then(()=>{let e={databaseURL:viewSeting.databaseUrl};firebase.initializeApp(e),"function"==typeof loadClickCounts&&loadClickCounts()})}async function loadBookmarkedPosts(){let e=document.getElementById("postContainer"),t=JSON.parse(localStorage.getItem("bookmarkedPosts"))||[],a=t.map(e=>fetch(`/feeds/posts/default/${e}?alt=json`).then(e=>e.json())),s=await Promise.all(a),l=s.filter(e=>null!==e);0===l.length?e.innerHTML="<p class='PI sColor'>It looks like you haven't added anything yet. Don't leave this blank, <span class='fontw500 pColor'>add your favorite articles now.</span></p><a class='button big r gap16 fontw500 fontsize13 nolight' href='/'><span>Let's add one!</span><span class='mask arrow-right'/></a>":renderPosts(l)}function renderPosts(e){let t=document.getElementById("postContainer");t.innerHTML="",e.forEach(e=>{let a=e.entry,s=a.title.$t,l=a.link.find(e=>"alternate"===e.rel).href;imgSrc=a.media$thumbnail?a.media$thumbnail.url.replace(/\/s\d+\-c\//,"/s300-c/"):"https://blogger.googleusercontent.com/img/b/.../s1600/noImage.png";let o=document.createElement("article");o.classList.add("bookmark-post","inheritcolor"),o.innerHTML=`<div class='img'><a href="${l}" aria-label="Thumbnail"><img src="${imgSrc}" loading="lazy" alt="${s}"></a></div><div class="titleI"><h2><a href="${l}">${s}</a></h2></div><div class="deleteBtn flex place-center" data-postId="${a.id.$t.split(".post-").pop()}"><svg class="line" viewBox="0 0 24 24"><path d="M 18.645 9.251 L 18.649 12.575 M 17.667 19.142 L 15.545 17.021 M 15.544 21.263 L 17.667 19.142 M 19.788 17.021 L 17.667 19.142 M 17.666 19.142 L 19.787 21.263 M 8.625 5.217 L 15.375 5.217 M 4.212 5.217 L 8.821 5.217 M 19.788 5.217 L 15.179 5.217 M 8.625 5.203 L 8.625 4.19 C 8.625 3.085 9.52 2.19 10.625 2.19 L 13.375 2.19 C 14.479 2.19 15.375 3.085 15.375 4.19 L 15.375 5.203 M 10.844 21.263 L 7.53 21.263 C 6.454 21.263 5.532 20.618 5.346 19.735 L 5.355 9.251"></path></svg></div>`,t.appendChild(o),o.querySelector(".deleteBtn").addEventListener("click",e=>{let t=e.target.getAttribute("data-postId");deletePost(t)})})}function deletePost(e){let t=JSON.parse(localStorage.getItem("bookmarkedPosts"))||[];t=t.filter(t=>t!==e),localStorage.setItem("bookmarkedPosts",JSON.stringify(t));let a=document.querySelector(`.deleteBtn[data-postId='${e}']`).closest(".bookmark-post");a&&a.remove(),updateBookmarkCount();let s=document.getElementById("postContainer");0===t.length&&(s.innerHTML="<p class='PI sColor'>It looks like you haven't added anything yet. Don't leave this blank, <span class='fontw500 pColor'>add your favorite articles now.</span></p><a class='button big r gap16 fontw500 fontsize13 nolight' href='/'><span>Let's add one!</span><span class='mask arrow-right'/></a>")}null!==document.querySelector("#postContainer")&&loadBookmarkedPosts();if(null!==document.querySelector(".forYou")){const e=document.querySelector(".forYou"),t=document.querySelector(".info .x .n a").dataset.label;fetch(`/feeds/posts/default/-/${t}?alt=json`).then(e=>e.json()).then(t=>{const l=(t.feed.entry||[]).map(e=>{const t=e.title.$t,l=e.link.find(e=>"alternate"===e.rel).href,img=e.media$thumbnail?e.media$thumbnail.url.replace(/\/s\d+\-c\//,"/s300-c/"):"https://blogger.googleusercontent.com/img/b/.../s1600/noImage.png";return{title:t,link:l,img:img}});for(let e=l.length-1;e>0;e--){const t=Math.floor(Math.random()*(e+1));[l[e],l[t]]=[l[t],l[e]]}let n="";l.slice(0,4).forEach(e=>{n+=`<article class='flex align-center'><a href='${e.link}'><img src='${e.img}' alt='${e.title}' loading='lazy'/></a><h2 class='pFont fontsize16'><a href='${e.link}'>${e.title}</a></h2></article>`}),e.innerHTML=n}).catch(t=>{console.error("Failed to fetch posts:",t),e.innerHTML="<p>Could not load related posts.</p>"})}let e=document.querySelector("body"),t=document.createElement("div");function o(e,t,o){document.cookie=`${e}=${t}; max-age=${o}; path=/`}function n(e){return document.cookie.split("; ").find(t=>t.startsWith(e+"="))?.split("=")[1]}t.classList.add("cookie","flex","column"),t.insertAdjacentHTML("beforeend",`<p class="fontsize14 LS">We use cookies to understand preferences and optimize your experience using our site, this includes advertising affiliated with Google.</p><div class="flex align-center"><a class="button noH extralink nolight" href="https://policies.google.com/technologies/cookies" rel="nofollow noreferrer" target="_blank">Learn more</a><button class="accept button r noH noC black nolight">OK, got it.</button></div>`),e.prepend(t),n("cookieConsent")?t.remove():t.querySelector(".accept").addEventListener("click",()=>{o("cookieConsent","true",2592e3),t.remove()});
